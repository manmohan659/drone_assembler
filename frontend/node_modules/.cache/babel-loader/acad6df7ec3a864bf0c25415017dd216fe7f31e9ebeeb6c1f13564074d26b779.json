{"ast":null,"code":"var _jsxFileName = \"/Users/manmohan/drone-assembly-ai/frontend/src/components/VoiceInput.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/VoiceInput.js\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Mic, MicOff } from 'lucide-react';\nimport Logger from '../utils/logger';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VoiceInput = ({\n  onVoiceInput,\n  disabled = false\n}) => {\n  _s();\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [recognition, setRecognition] = useState(null);\n  const [error, setError] = useState(null);\n  const [processingStatus, setProcessingStatus] = useState(null);\n  const startListening = useCallback(() => {\n    try {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        throw new Error('Speech recognition is not supported in this browser');\n      }\n      const recognitionInstance = new SpeechRecognition();\n      recognitionInstance.continuous = false;\n      recognitionInstance.interimResults = true;\n      recognitionInstance.lang = 'en-US';\n      recognitionInstance.onstart = () => {\n        Logger.info('Voice recognition started');\n        setIsListening(true);\n        setError(null);\n        setTranscript('Listening...');\n        setProcessingStatus(null);\n      };\n      recognitionInstance.onresult = event => {\n        const interimTranscript = Array.from(event.results).map(result => result[0].transcript).join('');\n        setTranscript(interimTranscript);\n\n        // If this is a final result\n        if (event.results[0].isFinal) {\n          Logger.voiceCapture(interimTranscript);\n          setProcessingStatus('Processing voice input...');\n\n          // Pass the transcript to parent component\n          onVoiceInput(interimTranscript, status => {\n            setProcessingStatus(status);\n            // Clear transcript and status after 5 seconds\n            setTimeout(() => {\n              setTranscript('');\n              setProcessingStatus(null);\n            }, 5000);\n          });\n        }\n      };\n      recognitionInstance.onerror = event => {\n        Logger.error('Voice recognition error:', event.error);\n        setError(`Error: ${event.error}`);\n        setIsListening(false);\n      };\n      recognitionInstance.onend = () => {\n        Logger.info('Voice recognition ended');\n        setIsListening(false);\n        if (!error && !processingStatus) {\n          setProcessingStatus('Processing...');\n        }\n      };\n      setRecognition(recognitionInstance);\n      recognitionInstance.start();\n    } catch (error) {\n      Logger.error('Failed to initialize voice recognition:', error);\n      setError(error.message);\n    }\n  }, [onVoiceInput, error, processingStatus]);\n  const stopListening = useCallback(() => {\n    if (recognition) {\n      recognition.stop();\n      Logger.info('Voice recognition manually stopped');\n      setIsListening(false);\n    }\n  }, [recognition]);\n  useEffect(() => {\n    return () => {\n      if (recognition) {\n        recognition.stop();\n        Logger.info('Voice recognition cleanup on unmount');\n      }\n    };\n  }, [recognition]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-end gap-2\",\n    children: [(transcript || processingStatus) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-black/70 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-sm max-w-xs\",\n      children: transcript || processingStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-900/70 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-sm max-w-xs\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: isListening ? stopListening : startListening,\n      disabled: disabled,\n      className: `w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg transition-colors relative ${isListening ? 'bg-red-600 hover:bg-red-700' : 'bg-purple-600 hover:bg-purple-700'} ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`,\n      title: isListening ? 'Stop listening' : 'Start voice input',\n      \"aria-label\": isListening ? 'Stop voice input' : 'Start voice input',\n      children: [isListening ? /*#__PURE__*/_jsxDEV(MicOff, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 24\n      }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 57\n      }, this), isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 rounded-full border-4 border-red-400 animate-ping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(VoiceInput, \"qgrcYqSaJYU3O+dPEBAw9ULPU3Q=\");\n_c = VoiceInput;\nexport default VoiceInput;\nvar _c;\n$RefreshReg$(_c, \"VoiceInput\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","Mic","MicOff","Logger","jsxDEV","_jsxDEV","VoiceInput","onVoiceInput","disabled","_s","isListening","setIsListening","transcript","setTranscript","recognition","setRecognition","error","setError","processingStatus","setProcessingStatus","startListening","SpeechRecognition","window","webkitSpeechRecognition","Error","recognitionInstance","continuous","interimResults","lang","onstart","info","onresult","event","interimTranscript","Array","from","results","map","result","join","isFinal","voiceCapture","status","setTimeout","onerror","onend","start","message","stopListening","stop","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","_c","$RefreshReg$"],"sources":["/Users/manmohan/drone-assembly-ai/frontend/src/components/VoiceInput.js"],"sourcesContent":["// frontend/src/components/VoiceInput.js\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Mic, MicOff } from 'lucide-react';\nimport Logger from '../utils/logger';\n\nconst VoiceInput = ({ onVoiceInput, disabled = false }) => {\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [recognition, setRecognition] = useState(null);\n  const [error, setError] = useState(null);\n  const [processingStatus, setProcessingStatus] = useState(null);\n\n  const startListening = useCallback(() => {\n    try {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        throw new Error('Speech recognition is not supported in this browser');\n      }\n\n      const recognitionInstance = new SpeechRecognition();\n      \n      recognitionInstance.continuous = false;\n      recognitionInstance.interimResults = true;\n      recognitionInstance.lang = 'en-US';\n\n      recognitionInstance.onstart = () => {\n        Logger.info('Voice recognition started');\n        setIsListening(true);\n        setError(null);\n        setTranscript('Listening...');\n        setProcessingStatus(null);\n      };\n\n      recognitionInstance.onresult = (event) => {\n        const interimTranscript = Array.from(event.results)\n          .map(result => result[0].transcript)\n          .join('');\n        \n        setTranscript(interimTranscript);\n        \n        // If this is a final result\n        if (event.results[0].isFinal) {\n          Logger.voiceCapture(interimTranscript);\n          setProcessingStatus('Processing voice input...');\n          \n          // Pass the transcript to parent component\n          onVoiceInput(interimTranscript, (status) => {\n            setProcessingStatus(status);\n            // Clear transcript and status after 5 seconds\n            setTimeout(() => {\n              setTranscript('');\n              setProcessingStatus(null);\n            }, 5000);\n          });\n        }\n      };\n\n      recognitionInstance.onerror = (event) => {\n        Logger.error('Voice recognition error:', event.error);\n        setError(`Error: ${event.error}`);\n        setIsListening(false);\n      };\n\n      recognitionInstance.onend = () => {\n        Logger.info('Voice recognition ended');\n        setIsListening(false);\n        if (!error && !processingStatus) {\n          setProcessingStatus('Processing...');\n        }\n      };\n\n      setRecognition(recognitionInstance);\n      recognitionInstance.start();\n    } catch (error) {\n      Logger.error('Failed to initialize voice recognition:', error);\n      setError(error.message);\n    }\n  }, [onVoiceInput, error, processingStatus]);\n\n  const stopListening = useCallback(() => {\n    if (recognition) {\n      recognition.stop();\n      Logger.info('Voice recognition manually stopped');\n      setIsListening(false);\n    }\n  }, [recognition]);\n\n  useEffect(() => {\n    return () => {\n      if (recognition) {\n        recognition.stop();\n        Logger.info('Voice recognition cleanup on unmount');\n      }\n    };\n  }, [recognition]);\n\n  return (\n    <div className=\"flex flex-col items-end gap-2\">\n      {/* Status display */}\n      {(transcript || processingStatus) && (\n        <div className=\"bg-black/70 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-sm max-w-xs\">\n          {transcript || processingStatus}\n        </div>\n      )}\n      \n      {/* Error display */}\n      {error && (\n        <div className=\"bg-red-900/70 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-sm max-w-xs\">\n          {error}\n        </div>\n      )}\n      \n      {/* Voice input button */}\n      <button\n        onClick={isListening ? stopListening : startListening}\n        disabled={disabled}\n        className={`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg transition-colors relative ${\n          isListening \n            ? 'bg-red-600 hover:bg-red-700' \n            : 'bg-purple-600 hover:bg-purple-700'\n        } ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}\n        title={isListening ? 'Stop listening' : 'Start voice input'}\n        aria-label={isListening ? 'Stop voice input' : 'Start voice input'}\n      >\n        {isListening ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n        \n        {/* Listening animation */}\n        {isListening && (\n          <div className=\"absolute inset-0 rounded-full border-4 border-red-400 animate-ping\" />\n        )}\n      </button>\n    </div>\n  );\n};\n\nexport default VoiceInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
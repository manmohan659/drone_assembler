{"ast":null,"code":"var _jsxFileName = \"/Users/manmohan/Documents/drone_assembler/frontend/src/contexts/ProjectContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/contexts/ProjectContext.js\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getUserId, getProjectId } from '../utils/userIdentification';\nimport Logger from '../utils/logger';\n\n// Create the context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProjectContext = /*#__PURE__*/createContext();\n\n// Create a custom hook to use the project context\nexport const useProject = () => {\n  _s();\n  return useContext(ProjectContext);\n};\n\n// Provider component\n_s(useProject, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProjectProvider = ({\n  children\n}) => {\n  _s2();\n  const [currentProject, setCurrentProject] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [components, setComponents] = useState([]);\n  const [completedSteps, setCompletedSteps] = useState([]);\n\n  // Load project on component mount\n  useEffect(() => {\n    loadActiveProject();\n  }, []);\n\n  // Load the active project\n  const loadActiveProject = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const userId = getUserId();\n      const projectId = getProjectId();\n      if (!projectId) {\n        // No active project, so we're done loading\n        setIsLoading(false);\n        return;\n      }\n      Logger.info('Loading active project', {\n        userId,\n        projectId\n      });\n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        // Set current project\n        const {\n          context\n        } = data;\n\n        // Get or fetch the complete project details\n        const projectDetail = await getFullProjectDetails(userId, projectId, context);\n        setCurrentProject(projectDetail);\n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        Logger.info('Project loaded successfully', {\n          projectId,\n          name: context.projectName,\n          componentCount: (context.components || []).length\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error loading project', error);\n      setError('Failed to load your project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Get full project details\n  const getFullProjectDetails = async (userId, projectId, context = null) => {\n    if (context && context.projectId === projectId) {\n      // We already have the context, construct project object\n      return {\n        id: context.projectId,\n        name: context.projectName,\n        drone_type: context.droneType,\n        current_step: context.currentStep,\n        components: context.components,\n        completed_steps: context.completedSteps,\n        last_interaction: context.lastInteraction\n      };\n    }\n\n    // Need to fetch the full project details\n    try {\n      const response = await fetch(`http://localhost:5003/api/assembly/project`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to load project details: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        return data.project;\n      } else {\n        throw new Error(data.error || 'Failed to load project details');\n      }\n    } catch (error) {\n      Logger.error('Error loading project details', error);\n      throw error;\n    }\n  };\n\n  // Set the active project\n  const setActiveProject = async projectObj => {\n    try {\n      setIsLoading(true);\n\n      // Clear current project data first\n      setCurrentProject(null);\n      setComponents([]);\n      setCompletedSteps([]);\n      const userId = getUserId();\n      const projectId = typeof projectObj === 'object' ? projectObj.project_id || projectObj.projectId : projectObj;\n      if (!projectId || typeof projectId !== 'string') {\n        console.error(\"[ERROR] Invalid project ID:\", projectId);\n        return;\n      }\n      Logger.info('Setting active project', {\n        userId,\n        projectId\n      });\n\n      // Load fresh project data\n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        // Set current project with fresh data\n        const {\n          context\n        } = data;\n        setCurrentProject({\n          project_id: context.projectId,\n          project_name: context.projectName,\n          drone_type: context.droneType,\n          current_step: context.currentStep,\n          components: context.components || [],\n          completed_steps: context.completedSteps || [],\n          last_interaction: context.lastInteraction\n        });\n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        Logger.info('Project switched successfully', {\n          projectId,\n          name: context.projectName,\n          componentCount: (context.components || []).length\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error setting active project', error);\n      setError('Failed to set active project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // In ProjectContext.js - Fix the addComponents function\n  const addComponents = async newComponents => {\n    try {\n      if (!currentProject || !newComponents || !newComponents.length) {\n        return;\n      }\n      const userId = getUserId();\n      // Ensure we're using the correct project ID property\n      const projectId = currentProject.project_id || currentProject.projectId;\n      if (!projectId || typeof projectId !== 'string') {\n        console.error(\"[ERROR] Invalid project ID:\", projectId);\n        return;\n      }\n\n      // Rest of your existing merge logic...\n\n      // Update local state FIRST\n      setComponents(allComponents);\n\n      // Update currentProject\n      setCurrentProject(prevProject => ({\n        ...prevProject,\n        components: allComponents\n      }));\n\n      // Send to backend\n      try {\n        const response = await fetch(`http://localhost:5003/api/assembly/project/components`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId,\n            projectId,\n            components: allComponents\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`Failed to update components: ${response.statusText}`);\n        }\n\n        // Don't reload the entire project - it's causing issues\n        // Instead, trust your local state update\n      } catch (apiError) {\n        console.error(\"[DEBUG] API call error:\", apiError);\n      }\n      return allComponents;\n    } catch (error) {\n      Logger.error('Error updating components', error);\n      return null;\n    }\n  };\n  // Add a completed step\n  const addCompletedStep = async step => {\n    try {\n      if (!currentProject || !step) {\n        return;\n      }\n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n\n      // Update local state first for UI responsiveness\n      const updatedSteps = [...completedSteps, step];\n      setCompletedSteps(updatedSteps);\n\n      // Also update the currentProject immediately for UI refresh\n      setCurrentProject(prevProject => ({\n        ...prevProject,\n        current_step: step.stepNumber + 1,\n        completed_steps: updatedSteps\n      }));\n\n      // Send to server\n      Logger.info('Adding completed step', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n      const response = await fetch(`http://localhost:5003/api/assembly/project/step`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          step\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to add completed step: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to add completed step');\n      }\n      Logger.info('Completed step added successfully', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n      console.log(\"[DEBUG] Sending to API:\", {\n        userId,\n        projectId,\n        components: components\n      });\n      return updatedSteps;\n    } catch (error) {\n      Logger.error('Error adding completed step', error);\n      setError('Failed to add completed step. Please try again.');\n      // Revert to the original state\n      setCompletedSteps(completedSteps);\n      // Also revert the currentProject\n      setCurrentProject(prevProject => ({\n        ...prevProject,\n        current_step: prevProject.current_step,\n        // Keep original step\n        completed_steps: completedSteps\n      }));\n      return null;\n    }\n  };\n\n  // Value to be provided by the context\n  const value = {\n    currentProject,\n    isLoading,\n    error,\n    components,\n    completedSteps,\n    loadActiveProject,\n    setActiveProject,\n    addComponents,\n    addCompletedStep\n  };\n  return /*#__PURE__*/_jsxDEV(ProjectContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n};\n_s2(ProjectProvider, \"Jrfl5IRKFknNymEHeXjLz7L6xN8=\");\n_c = ProjectProvider;\nvar _c;\n$RefreshReg$(_c, \"ProjectProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getUserId","getProjectId","Logger","jsxDEV","_jsxDEV","ProjectContext","useProject","_s","ProjectProvider","children","_s2","currentProject","setCurrentProject","isLoading","setIsLoading","error","setError","components","setComponents","completedSteps","setCompletedSteps","loadActiveProject","userId","projectId","info","response","fetch","ok","Error","statusText","data","json","success","context","projectDetail","getFullProjectDetails","name","projectName","componentCount","length","id","drone_type","droneType","current_step","currentStep","completed_steps","last_interaction","lastInteraction","method","headers","body","JSON","stringify","project","setActiveProject","projectObj","project_id","console","project_name","addComponents","newComponents","allComponents","prevProject","apiError","addCompletedStep","step","updatedSteps","stepNumber","log","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/manmohan/Documents/drone_assembler/frontend/src/contexts/ProjectContext.js"],"sourcesContent":["// frontend/src/contexts/ProjectContext.js\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getUserId, getProjectId } from '../utils/userIdentification';\nimport Logger from '../utils/logger';\n\n// Create the context\nconst ProjectContext = createContext();\n\n// Create a custom hook to use the project context\nexport const useProject = () => useContext(ProjectContext);\n\n// Provider component\nexport const ProjectProvider = ({ children }) => {\n  const [currentProject, setCurrentProject] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [components, setComponents] = useState([]);\n  const [completedSteps, setCompletedSteps] = useState([]);\n\n  // Load project on component mount\n  useEffect(() => {\n    loadActiveProject();\n  }, []);\n\n  \n  // Load the active project\n  const loadActiveProject = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const userId = getUserId();\n      const projectId = getProjectId();\n      \n      if (!projectId) {\n        // No active project, so we're done loading\n        setIsLoading(false);\n        return;\n      }\n      \n      Logger.info('Loading active project', { userId, projectId });\n      \n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        // Set current project\n        const { context } = data;\n        \n        // Get or fetch the complete project details\n        const projectDetail = await getFullProjectDetails(userId, projectId, context);\n        \n        setCurrentProject(projectDetail);\n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        \n        Logger.info('Project loaded successfully', { \n          projectId, \n          name: context.projectName,\n          componentCount: (context.components || []).length\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error loading project', error);\n      setError('Failed to load your project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Get full project details\n  const getFullProjectDetails = async (userId, projectId, context = null) => {\n    if (context && context.projectId === projectId) {\n      // We already have the context, construct project object\n      return {\n        id: context.projectId,\n        name: context.projectName,\n        drone_type: context.droneType,\n        current_step: context.currentStep,\n        components: context.components,\n        completed_steps: context.completedSteps,\n        last_interaction: context.lastInteraction\n      };\n    }\n    \n    // Need to fetch the full project details\n    try {\n      const response = await fetch(`http://localhost:5003/api/assembly/project`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load project details: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        return data.project;\n      } else {\n        throw new Error(data.error || 'Failed to load project details');\n      }\n    } catch (error) {\n      Logger.error('Error loading project details', error);\n      throw error;\n    }\n  };\n\n  // Set the active project\n  const setActiveProject = async (projectObj) => {\n    try {\n      setIsLoading(true);\n      \n      // Clear current project data first\n      setCurrentProject(null);\n      setComponents([]);\n      setCompletedSteps([]);\n      \n      const userId = getUserId();\n\n      const projectId = typeof projectObj === 'object' ? \n      (projectObj.project_id || projectObj.projectId) : projectObj;\n    \n      if (!projectId || typeof projectId !== 'string') {\n      console.error(\"[ERROR] Invalid project ID:\", projectId);\n      return;\n    }\n    \n      \n      Logger.info('Setting active project', { userId, projectId });\n      \n      // Load fresh project data\n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        // Set current project with fresh data\n        const { context } = data;\n        \n        setCurrentProject({\n          project_id: context.projectId,\n          project_name: context.projectName,\n          drone_type: context.droneType,\n          current_step: context.currentStep,\n          components: context.components || [],\n          completed_steps: context.completedSteps || [],\n          last_interaction: context.lastInteraction\n        });\n        \n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        \n        Logger.info('Project switched successfully', { \n          projectId, \n          name: context.projectName,\n          componentCount: (context.components || []).length\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error setting active project', error);\n      setError('Failed to set active project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n// In ProjectContext.js - Fix the addComponents function\nconst addComponents = async (newComponents) => {\n  try {\n    if (!currentProject || !newComponents || !newComponents.length) {\n      return;\n    }\n    \n    const userId = getUserId();\n    // Ensure we're using the correct project ID property\n    const projectId = currentProject.project_id || currentProject.projectId;\n    \n    if (!projectId || typeof projectId !== 'string') {\n      console.error(\"[ERROR] Invalid project ID:\", projectId);\n      return;\n    }\n    \n    // Rest of your existing merge logic...\n    \n    // Update local state FIRST\n    setComponents(allComponents);\n    \n    // Update currentProject\n    setCurrentProject(prevProject => ({\n      ...prevProject,\n      components: allComponents\n    }));\n    \n    // Send to backend\n    try {\n      const response = await fetch(`http://localhost:5003/api/assembly/project/components`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          components: allComponents\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update components: ${response.statusText}`);\n      }\n      \n      // Don't reload the entire project - it's causing issues\n      // Instead, trust your local state update\n      \n    } catch (apiError) {\n      console.error(\"[DEBUG] API call error:\", apiError);\n    }\n    \n    return allComponents;\n  } catch (error) {\n    Logger.error('Error updating components', error);\n    return null;\n  }\n};\n  // Add a completed step\n  const addCompletedStep = async (step) => {\n    try {\n      if (!currentProject || !step) {\n        return;\n      }\n      \n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n      \n      // Update local state first for UI responsiveness\n      const updatedSteps = [...completedSteps, step];\n      setCompletedSteps(updatedSteps);\n      \n      // Also update the currentProject immediately for UI refresh\n      setCurrentProject(prevProject => ({\n        ...prevProject,\n        current_step: step.stepNumber + 1,\n        completed_steps: updatedSteps\n      }));\n      \n      // Send to server\n      Logger.info('Adding completed step', { \n        projectId,\n        stepNumber: step.stepNumber\n      });\n      \n      const response = await fetch(`http://localhost:5003/api/assembly/project/step`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          step\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to add completed step: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to add completed step');\n      }\n      \n      Logger.info('Completed step added successfully', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n\n      console.log(\"[DEBUG] Sending to API:\", {\n        userId,\n        projectId,\n        components: components\n      });\n\n      return updatedSteps;\n    } catch (error) {\n      Logger.error('Error adding completed step', error);\n      setError('Failed to add completed step. Please try again.');\n      // Revert to the original state\n      setCompletedSteps(completedSteps);\n      // Also revert the currentProject\n      setCurrentProject(prevProject => ({\n        ...prevProject,\n        current_step: prevProject.current_step, // Keep original step\n        completed_steps: completedSteps\n      }));\n      return null;\n    }\n  };\n\n  // Value to be provided by the context\n  const value = {\n    currentProject,\n    isLoading,\n    error,\n    components,\n    completedSteps,\n    loadActiveProject,\n    setActiveProject,\n    addComponents,\n    addCompletedStep\n  };\n  \n\n\n  return (\n    <ProjectContext.Provider value={value}>\n      {children}\n    </ProjectContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/manmohan/drone-assembly-ai/frontend/src/contexts/ProjectContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/contexts/ProjectContext.js\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getUserId, getProjectId } from '../utils/userIdentification';\nimport Logger from '../utils/logger';\n\n// Create the context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProjectContext = /*#__PURE__*/createContext();\n\n// Create a custom hook to use the project context\nexport const useProject = () => {\n  _s();\n  return useContext(ProjectContext);\n};\n\n// Provider component\n_s(useProject, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProjectProvider = ({\n  children\n}) => {\n  _s2();\n  const [currentProject, setCurrentProject] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [components, setComponents] = useState([]);\n  const [completedSteps, setCompletedSteps] = useState([]);\n\n  // Load project on component mount\n  useEffect(() => {\n    loadActiveProject();\n  }, []);\n\n  // Load the active project\n  const loadActiveProject = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const userId = getUserId();\n      const projectId = getProjectId();\n      if (!projectId) {\n        // No active project, so we're done loading\n        setIsLoading(false);\n        return;\n      }\n      Logger.info('Loading active project', {\n        userId,\n        projectId\n      });\n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        // Set current project\n        const {\n          context\n        } = data;\n\n        // Get or fetch the complete project details\n        const projectDetail = await getFullProjectDetails(userId, projectId, context);\n        setCurrentProject(projectDetail);\n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        Logger.info('Project loaded successfully', {\n          projectId,\n          name: context.projectName\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error loading project', error);\n      setError('Failed to load your project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Get full project details\n  const getFullProjectDetails = async (userId, projectId, context = null) => {\n    if (context && context.projectId === projectId) {\n      // We already have the context, construct project object\n      return {\n        id: context.projectId,\n        name: context.projectName,\n        drone_type: context.droneType,\n        current_step: context.currentStep,\n        components: context.components,\n        completed_steps: context.completedSteps,\n        last_interaction: context.lastInteraction\n      };\n    }\n\n    // Need to fetch the full project details\n    try {\n      const response = await fetch(`http://localhost:5003/api/assembly/project`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to load project details: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        return data.project;\n      } else {\n        throw new Error(data.error || 'Failed to load project details');\n      }\n    } catch (error) {\n      Logger.error('Error loading project details', error);\n      throw error;\n    }\n  };\n\n  // Set the active project\n  const setActiveProject = async project => {\n    try {\n      setCurrentProject(project);\n      setComponents(project.components || []);\n      setCompletedSteps(project.completed_steps || []);\n      Logger.info('Set active project', {\n        projectId: project.project_id,\n        name: project.project_name\n      });\n    } catch (error) {\n      Logger.error('Error setting active project', error);\n      setError('Failed to set active project. Please try again.');\n    }\n  };\n\n  // Add identified components to the project\n  const addComponents = async newComponents => {\n    try {\n      if (!currentProject || !newComponents || !newComponents.length) {\n        return;\n      }\n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n\n      // Merge with existing components (avoiding duplicates)\n      const existingComponents = [...components];\n      const allComponents = [...existingComponents];\n      newComponents.forEach(newComp => {\n        const exists = existingComponents.some(existing => typeof existing === 'string' && existing === newComp || existing.name && newComp.name && existing.name === newComp.name);\n        if (!exists) {\n          allComponents.push(newComp);\n        }\n      });\n\n      // Update local state first for UI responsiveness\n      setComponents(allComponents);\n\n      // Send to server\n      Logger.info('Updating project components', {\n        projectId,\n        componentCount: allComponents.length\n      });\n      const response = await fetch(`http://localhost:5003/api/assembly/project/components`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          components: allComponents\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to update components: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to update components');\n      }\n\n      // Update the current project with the response data\n      setCurrentProject({\n        ...currentProject,\n        components: allComponents\n      });\n      Logger.info('Components updated successfully', {\n        projectId,\n        componentCount: allComponents.length\n      });\n      return allComponents;\n    } catch (error) {\n      Logger.error('Error updating components', error);\n      setError('Failed to update components. Please try again.');\n      // Revert to the original state\n      setComponents(components);\n      return null;\n    }\n  };\n\n  // Add a completed step\n  const addCompletedStep = async step => {\n    try {\n      if (!currentProject || !step) {\n        return;\n      }\n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n\n      // Update local state first for UI responsiveness\n      const updatedSteps = [...completedSteps, step];\n      setCompletedSteps(updatedSteps);\n\n      // Send to server\n      Logger.info('Adding completed step', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n      const response = await fetch(`http://localhost:5003/api/assembly/project/step`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          step\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to add completed step: ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to add completed step');\n      }\n\n      // Update the current project with the response data\n      setCurrentProject({\n        ...currentProject,\n        current_step: step.stepNumber + 1,\n        completed_steps: updatedSteps\n      });\n      Logger.info('Completed step added successfully', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n      return updatedSteps;\n    } catch (error) {\n      Logger.error('Error adding completed step', error);\n      setError('Failed to add completed step. Please try again.');\n      // Revert to the original state\n      setCompletedSteps(completedSteps);\n      return null;\n    }\n  };\n\n  // Value to be provided by the context\n  const value = {\n    currentProject,\n    isLoading,\n    error,\n    components,\n    completedSteps,\n    loadActiveProject,\n    setActiveProject,\n    addComponents,\n    addCompletedStep\n  };\n  return /*#__PURE__*/_jsxDEV(ProjectContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 5\n  }, this);\n};\n_s2(ProjectProvider, \"Jrfl5IRKFknNymEHeXjLz7L6xN8=\");\n_c = ProjectProvider;\nvar _c;\n$RefreshReg$(_c, \"ProjectProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getUserId","getProjectId","Logger","jsxDEV","_jsxDEV","ProjectContext","useProject","_s","ProjectProvider","children","_s2","currentProject","setCurrentProject","isLoading","setIsLoading","error","setError","components","setComponents","completedSteps","setCompletedSteps","loadActiveProject","userId","projectId","info","response","fetch","ok","Error","statusText","data","json","success","context","projectDetail","getFullProjectDetails","name","projectName","id","drone_type","droneType","current_step","currentStep","completed_steps","last_interaction","lastInteraction","method","headers","body","JSON","stringify","project","setActiveProject","project_id","project_name","addComponents","newComponents","length","existingComponents","allComponents","forEach","newComp","exists","some","existing","push","componentCount","addCompletedStep","step","updatedSteps","stepNumber","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/manmohan/drone-assembly-ai/frontend/src/contexts/ProjectContext.js"],"sourcesContent":["// frontend/src/contexts/ProjectContext.js\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getUserId, getProjectId } from '../utils/userIdentification';\nimport Logger from '../utils/logger';\n\n// Create the context\nconst ProjectContext = createContext();\n\n// Create a custom hook to use the project context\nexport const useProject = () => useContext(ProjectContext);\n\n// Provider component\nexport const ProjectProvider = ({ children }) => {\n  const [currentProject, setCurrentProject] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [components, setComponents] = useState([]);\n  const [completedSteps, setCompletedSteps] = useState([]);\n\n  // Load project on component mount\n  useEffect(() => {\n    loadActiveProject();\n  }, []);\n\n  // Load the active project\n  const loadActiveProject = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const userId = getUserId();\n      const projectId = getProjectId();\n      \n      if (!projectId) {\n        // No active project, so we're done loading\n        setIsLoading(false);\n        return;\n      }\n      \n      Logger.info('Loading active project', { userId, projectId });\n      \n      const response = await fetch(`http://localhost:5003/api/assembly/project/${userId}/${projectId}/context`);\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load project: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        // Set current project\n        const { context } = data;\n        \n        // Get or fetch the complete project details\n        const projectDetail = await getFullProjectDetails(userId, projectId, context);\n        \n        setCurrentProject(projectDetail);\n        setComponents(context.components || []);\n        setCompletedSteps(context.completedSteps || []);\n        \n        Logger.info('Project loaded successfully', { \n          projectId, \n          name: context.projectName\n        });\n      } else {\n        throw new Error(data.error || 'Failed to load project');\n      }\n    } catch (error) {\n      Logger.error('Error loading project', error);\n      setError('Failed to load your project. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Get full project details\n  const getFullProjectDetails = async (userId, projectId, context = null) => {\n    if (context && context.projectId === projectId) {\n      // We already have the context, construct project object\n      return {\n        id: context.projectId,\n        name: context.projectName,\n        drone_type: context.droneType,\n        current_step: context.currentStep,\n        components: context.components,\n        completed_steps: context.completedSteps,\n        last_interaction: context.lastInteraction\n      };\n    }\n    \n    // Need to fetch the full project details\n    try {\n      const response = await fetch(`http://localhost:5003/api/assembly/project`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load project details: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        return data.project;\n      } else {\n        throw new Error(data.error || 'Failed to load project details');\n      }\n    } catch (error) {\n      Logger.error('Error loading project details', error);\n      throw error;\n    }\n  };\n\n  // Set the active project\n  const setActiveProject = async (project) => {\n    try {\n      setCurrentProject(project);\n      setComponents(project.components || []);\n      setCompletedSteps(project.completed_steps || []);\n      \n      Logger.info('Set active project', { \n        projectId: project.project_id, \n        name: project.project_name \n      });\n    } catch (error) {\n      Logger.error('Error setting active project', error);\n      setError('Failed to set active project. Please try again.');\n    }\n  };\n\n  // Add identified components to the project\n  const addComponents = async (newComponents) => {\n    try {\n      if (!currentProject || !newComponents || !newComponents.length) {\n        return;\n      }\n      \n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n      \n      // Merge with existing components (avoiding duplicates)\n      const existingComponents = [...components];\n      \n      const allComponents = [...existingComponents];\n      newComponents.forEach(newComp => {\n        const exists = existingComponents.some(existing => \n          (typeof existing === 'string' && existing === newComp) ||\n          (existing.name && newComp.name && existing.name === newComp.name)\n        );\n        \n        if (!exists) {\n          allComponents.push(newComp);\n        }\n      });\n      \n      // Update local state first for UI responsiveness\n      setComponents(allComponents);\n      \n      // Send to server\n      Logger.info('Updating project components', { \n        projectId,\n        componentCount: allComponents.length\n      });\n      \n      const response = await fetch(`http://localhost:5003/api/assembly/project/components`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          components: allComponents\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update components: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to update components');\n      }\n      \n      // Update the current project with the response data\n      setCurrentProject({\n        ...currentProject,\n        components: allComponents\n      });\n      \n      Logger.info('Components updated successfully', {\n        projectId,\n        componentCount: allComponents.length\n      });\n      \n      return allComponents;\n    } catch (error) {\n      Logger.error('Error updating components', error);\n      setError('Failed to update components. Please try again.');\n      // Revert to the original state\n      setComponents(components);\n      return null;\n    }\n  };\n\n  // Add a completed step\n  const addCompletedStep = async (step) => {\n    try {\n      if (!currentProject || !step) {\n        return;\n      }\n      \n      const userId = getUserId();\n      const projectId = currentProject.project_id;\n      \n      // Update local state first for UI responsiveness\n      const updatedSteps = [...completedSteps, step];\n      setCompletedSteps(updatedSteps);\n      \n      // Send to server\n      Logger.info('Adding completed step', { \n        projectId,\n        stepNumber: step.stepNumber\n      });\n      \n      const response = await fetch(`http://localhost:5003/api/assembly/project/step`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          projectId,\n          step\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to add completed step: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to add completed step');\n      }\n      \n      // Update the current project with the response data\n      setCurrentProject({\n        ...currentProject,\n        current_step: step.stepNumber + 1,\n        completed_steps: updatedSteps\n      });\n      \n      Logger.info('Completed step added successfully', {\n        projectId,\n        stepNumber: step.stepNumber\n      });\n      \n      return updatedSteps;\n    } catch (error) {\n      Logger.error('Error adding completed step', error);\n      setError('Failed to add completed step. Please try again.');\n      // Revert to the original state\n      setCompletedSteps(completedSteps);\n      return null;\n    }\n  };\n\n  // Value to be provided by the context\n  const value = {\n    currentProject,\n    isLoading,\n    error,\n    components,\n    completedSteps,\n    loadActiveProject,\n    setActiveProject,\n    addComponents,\n    addCompletedStep\n  };\n\n  return (\n    <ProjectContext.Provider value={value}>\n      {children}\n    </ProjectContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}